---
title: 欧拉计划45
date: 2020-08-07 20:52:00
tags:
    - C++
    - Euler project
categories:
    - [Dev, Algorithm]
---



# [Problem 45](https://projecteuler.net/problem=45)

------

**Triangular, pentagonal, and hexagonal**

Triangle, pentagonal, and hexagonal numbers are generated by the following formulae:

|            |              |                     |
| ---------- | ------------ | ------------------- |
| Triangle   | Tn=n(n+1)/2  | 1, 3, 6, 10, 15, …  |
| Pentagonal | Pn=n(3n−1)/2 | 1, 5, 12, 22, 35, … |
| Hexagonal  | Hn=n(2n−1)   | 1, 6, 15, 28, 45, … |

It can be verified that T285 = P165 = H143 = 40755.

Find the next triangle number that is also pentagonal and hexagonal.



---

可证明任何一个六边形数字必然是三角形数字，证明略。

可以遍历六边形数字，判断是不是五边形数字。

判断是不是五边形数字使用二分法。



``` c++
#include <stdio.h>
#include <inttypes.h>

int64_t Triangele(int64_t n) {
    return n * (n + 1) / 2;
}

int64_t Pentagonal(int64_t n) {
    return n * (3 * n - 1) / 2;
}

int64_t Hexagonal(int64_t n) {
    return n * (2 * n - 1);
}

int64_t binary_search(int64_t (*func)(int64_t), int64_t n, int64_t x) { // 使用函数指针
    int64_t head = 1, tail = n, mid;
    while (head <= tail) {
        mid = (head + tail) >> 1;
        if (func(mid) == x) return 1;
        if (func(mid) < x) head = mid + 1;
        else tail = mid - 1;
    }
    return 0;
}

int main() {
    int64_t n = 143;
    while (1) {
        n++; // 六边形数字下标
        int64_t tmp = Hexagonal(n); // 遍历六边形数字
        
        // 二分判断是否为五边形数字，左右界为2 * n，和tmp
        if (!binary_search(Pentagonal, 2 * n, tmp)) continue; 
        break;
    }
    printf("%" PRId64 "\n", Hexagonal(n));
    return 0;
}
```

