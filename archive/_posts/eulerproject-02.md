---
title: 欧拉计划2
date: 2020-08-04 08:07:59
tags:
    - C++
    - Euler project
categories:
    - Algorithm
---





## **Even Fibonacci numbers** **偶斐波那契数**

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:

1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.



# 解1

数学推导可知:
$$
fib(n) \geq 1.5^n
$$
可知最多44项就可满足题目

```c++
#include <stdio.h>
#define max_n 44
#define N 4000000

int fib[max_n + 5] = {1, 2, 0};

int main() {
    int sum = 0;
    for (int i = 2; i <= max_n; i++) {
        fib[i] = fib[i - 1] + fib[i - 2];
    }
    for (int i = 0; i <= max_n; i++) {
        if (fib[i] <= N && !(fib[i] & 1)) sum += fib[i];
    }
    printf("%d\n", sum);
    return 0;
}
```

空间复杂度O(n)，不好。



# 解2

每次生成只依赖于前两项的值，因此没必要存储全部斐波那契数列。

```c++
#include <stdio.h>

#define max_n 4000000

int main() {
    int a = 0, b = 1, sum = 0;
    while (a + b <=  max_n) {
        b = a + b;
        a = b - a;
        if (b & 1) continue;
        sum += b;
    }
    printf("%d\n", sum);
    return 0;
}
```





# 解3



## 滚动数组：可循环利用的数组

[0, 1] => [2, 1] => [2, 3] => [5, 3] => ......



```c++
#include <stdio.h>
#define max_n 4000000
int fib[2] = {0, 1};

int main() {
    int sum = 0, n = 1;
    while (fib[n % 2] + fib[(n - 1) % 2] <= max_n) {
        n++;
        fib[n % 2] = fib[(n - 1) % 2] + fib[(n - 2) % 2];
        if (fib[n % 2] & 1) continue;
        sum += fib[n % 2];
    }
    printf("%d\n", sum);
    return 0;
}
```

